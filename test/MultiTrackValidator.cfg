process MULTITRACKVALIDATOR = {

#    include "FWCore/MessageService/data/MessageLogger.cfi"
    service = MessageLogger {
	untracked vstring destinations = {"cout"}
	untracked vstring categories    = { "TrackAssociator","TrackValidator",
	    "TrackFitters","TrackProducer","FwkSummary","RFIOFile","FwkReport","DDLParser"}
	untracked vstring debugModules = {"*"}
	#untracked vstring debugModules = {"ctfWithMaterialTracks","rsWithMaterialTracks","multiTrackValidator"}
	untracked PSet cout            = {
	    untracked string threshold = "DEBUG"
	    untracked PSet default   = { untracked int32 limit = 0  }
	    untracked PSet DDLParser = { untracked int32 limit = 0 }
	    untracked PSet TrackAssociator = { untracked int32 limit = -1 }
	    untracked PSet TrackValidator = { untracked int32 limit = -1 }
	    untracked PSet TrackFitters = { untracked int32 limit = -1}
	    untracked PSet TrackProducer = { untracked int32 limit = -1}
	    untracked PSet FwkSummary = { untracked int32 limit = -1 }
	    untracked PSet RFIOFile = { untracked int32 limit = -1 }
	    untracked PSet FwkReport =  { untracked int32 limit = -1
		untracked int32 reportEvery = 10 }
	}
	#untracked PSet log.txt = {
	#untracked PSet default   = { untracked int32 limit = 0  }
	#untracked PSet FwkSummary = { untracked int32 limit = -1 }
	#}
    }
    #    replace MessageLogger.categories     = { "TrackAssociator","TrackValidator" }
    #    replace MessageLogger.debugModules   = { "*" }
    #    replace MessageLogger.cout = {
    #        untracked string threshold = "INFO"
    #	untracked PSet default   = { untracked int32 limit = -1  }
    #	untracked PSet TrackAssociator = { untracked int32 limit = -1 }
    #	untracked PSet TrackValidator = { untracked int32 limit = -1 }
    #    }
    #    replace MessageLogger.cerr = { untracked bool placeholder = true }

    untracked PSet maxEvents = {untracked int32 input = 10}
    source = PoolSource { 
	untracked vstring fileNames = {
	    'file:single_mu_10_1.root'
	}
    }
    replace PoolSource.fileNames = {
	'/store/mc/2007/10/17/RelVal-RelValSingleMuPlusPt1000-1192637292/0000/8863B9F2-E47C-DC11-8A22-001617DBCF1E.root'
    }
    module evtInfo = AsciiOutputModule {}

    # Track Associators
    include "SimTracker/TrackAssociation/data/TrackAssociatorByChi2.cfi"
    include "SimTracker/TrackAssociation/data/TrackAssociatorByHits.cfi"

    # Filters
    include "Validation/RecoTrack/data/cuts.cff"
    replace cutsTPEffic.src = trackingtruthprod
    replace cutsTPFake.src = trackingtruthprod
   
    # Track Validator    
    include "Validation/RecoTrack/data/MultiTrackValidator.cff"
    #replace multiTrackValidator.associators = {"TrackAssociatorByChi2"}
    replace multiTrackValidator.label = {cutsCKF}
    #replace multiTrackValidator.out = "file.root"

    # Tracking Truth and mixing module, if needed
    include "SimGeneral/MixingModule/data/mix_none.cfi"
    include "SimGeneral/TrackingAnalysis/data/trackingParticles.cfi"
    #replace trackingtruthprod.DiscardHitsFromDeltas = false 

    path p = {mix, trackingtruthprod,cutsCKF,cutsRS,cutsTPEffic,cutsTPFake,multiTrackValidator}
    
    endpath ep = {
	evtInfo
    }
}
