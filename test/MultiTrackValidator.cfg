process MULTITRACKVALIDATOR = {

    include "FWCore/MessageService/data/MessageLogger.cfi"
    replace MessageLogger.categories     = { "TrackAssociator","TrackValidator" }
    replace MessageLogger.debugModules   = { "*" }
    replace MessageLogger.cout = {
        untracked string threshold = "INFO"
	untracked PSet default   = { untracked int32 limit = 0 }
	untracked PSet TrackAssociator = { untracked int32 limit = -1 }
	untracked PSet TrackValidator = { untracked int32 limit = -1 }
    }
    replace MessageLogger.cerr = { untracked bool placeholder = true }

    untracked PSet maxEvents = {untracked int32 input = -1}
    source = PoolSource { 
	untracked vstring fileNames = {
	    'file:/tmp/cerati/TTbar.root'
	}
    }

    module evtInfo = AsciiOutputModule {}

    # Track Associators
    include "SimTracker/TrackAssociation/data/TrackAssociatorByChi2.cfi"
    include "SimTracker/TrackAssociation/data/TrackAssociatorByHits.cfi"

    # Filters: 
    include "Validation/RecoTrack/data/cuts.cff"
    #NB: tracks are already filtered by the generalTracks sequence
    #for additional cuts use the cutsRecoTracks filter:
    #default cuts for reco tracks are dummy: please replace cuts according to your use case!
    #The following cut were used to produce TDR plots
    #replace cutsRecoTracks.ptMin = 0.8
    #replace cutsRecoTracks.minRapidity =-2.5
    #replace cutsRecoTracks.maxRapidity = 2.5
    #replace cutsRecoTracks.tip = 3.5
    #replace cutsRecoTracks.lip = 30
    #replace cutsRecoTracks.minHit = 8
    #replace cutsRecoTracks.maxChi2 = 10000 #not used in tdr
    #replace cutsRecoTracks.quality = "tight"

    #replace cutsTPEffic.src = trackingtruthprod
    #replace cutsTPFake.src = trackingtruthprod
   
    # Track Validator    
    include "Validation/RecoTrack/data/MultiTrackValidator.cff"
    #replace multiTrackValidator.associators = {"TrackAssociatorByHits","TrackAssociatorByChi2"}
    #replace multiTrackValidator.UseAssociators = true
    #replace multiTrackValidator.label = {cutsRecoTracks}
    #replace multiTrackValidator.associatormap = assoc2GsfTracks 
    #replace multiTrackValidator.out = "file.root"
    
    # Tracking Truth and mixing module, if needed
    #include "SimGeneral/MixingModule/data/mix_none.cfi"
    #include "SimGeneral/TrackingAnalysis/data/trackingParticles.cfi"

    path p = {multiTrackValidator}
    
    endpath ep = {
	evtInfo
    }
}
