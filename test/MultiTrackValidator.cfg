process MULTITRACKVALIDATOR = {

    #include "FWCore/MessageService/data/MessageLogger.cfi"
    service = MessageLogger
    {
	untracked vstring destinations = {"cout"}
    	untracked vstring categories    = { "TrackAssociator","TrackValidator" }
    	untracked vstring debugModules = {"*"}
	untracked PSet cout            = {
	    untracked string threshold = "DEBUG"
	    untracked PSet default   = { untracked int32 limit = 0  }
    	    untracked PSet TrackAssociator = { untracked int32 limit = -1 }
    	    untracked PSet TrackValidator = { untracked int32 limit = -1 }
	}
    }

    untracked PSet maxEvents = {untracked int32 input = -1}
    source = PoolSource { 
	untracked vstring fileNames = {
	    'file:single_mu_10_1.root'
	}
    }
    
    module evtInfo = AsciiOutputModule {}

    # Track Associators
    include "SimTracker/TrackAssociation/data/TrackAssociatorByChi2.cfi"
    include "SimTracker/TrackAssociation/data/TrackAssociatorByHits.cfi"

    # Filters
    include "Validation/RecoTrack/data/cuts.cff"
    #replace cutsTPEff.src = trackingParticles 
    #replace cutsTPFake.src = trackingParticles 
    
    # Track Validator    
    include "Validation/RecoTrack/data/MultiTrackValidator.cff"
    #replace multiTrackValidator.associators = {"TrackAssociatorByChi2"}
    #replace multiTrackValidator.label = {cutsCKF}
    #replace multiTrackValidator.out = "file.root"

    # Tracking Truth, if needed
    #include "SimGeneral/TrackingAnalysis/data/trackingParticles.cfi"
    #include "SimGeneral/TrackingAnalysis/data/trackingtruth.cfi"
    #replace trackingtruth.HepMCDataLabels = {"source"}
    #include "SimGeneral/TrackingAnalysis/data/trackingParticles.cfi"

    #path p = {trackingtruth,multiTrackValidator}
    #path p = {trackingParticles,multiTrackValidator}

    path p = {cutsCKF,cutsRS,cutsTPEffic,cutsTPFake,multiTrackValidator}
    
    endpath ep = {
	evtInfo
    }
}
